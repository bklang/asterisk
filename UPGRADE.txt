Information for Upgrading From Previous Asterisk Releases
=========================================================

Manager:

* The CallerID fields across Manager events have now been made more
  consistent. CallerID Number will be sent as CallerIDNum and CallerID
  Name will be sent as CallerIDName wherever used.

AEL:

* Macros are now implemented underneath with the Gosub() application.
  Heaven Help You if you wrote code depending on any aspect of this!
  Previous to 1.6, macros were implemented with the Macro() app, which
  provided a nice feature of auto-returning. The compiler will do its
  best to insert a Return() app call at the end of your macro if you did
  not include it, but really, you should make sure that all execution
  paths within your macros end in "return;".

Core:

* The 'languageprefix' option in asterisk.conf is now deprecated, and
  the default sound file layout for non-English sounds is the 'new
  style' layout introduced in Asterisk 1.4 (and used by the automatic
  sound file installer in the Makefile).

* The ast_expr2 stuff has been modified to handle floating-point numbers.
  Numbers of the format D.D are now acceptable input for the expr parser, 
  Where D is a string of base-10 digits. All math is now done in "long double",
  if it is available on your compiler/architecture. This was half-way between
  a bug-fix (because the MATH func returns fp by default), and an enhancement.
 
Voicemail:

* The voicemail configuration values 'maxmessage' and 'minmessage' have
  been changed to 'maxsecs' and 'minsecs' to clarify their purpose and
  to make them more distinguishable from 'maxmsgs', which sets folder
  size.  The old variables will continue to work in this version, albeit
  with a deprecation warning.
* If you use any interface for modifying voicemail aside from the built in
  dialplan applications, then the option "pollmailboxes" *must* be set in
  voicemail.conf for message waiting indication (MWI) to work properly.  This
  is because Voicemail notification is now event based instead of polling
  based.  The channel drivers are no longer responsible for constantly manually
  checking mailboxes for changes so that they can send MWI information to users.
  Examples of situations that would require this option are web interfaces to
  voicemail or an email client in the case of using IMAP storage.

Applications:

* ChanIsAvail() now has a 't' option, which allows the specified device
  to be queried for state without consulting the channel drivers. This
  performs mostly a 'ChanExists' sort of function.
* SetCallerPres() has been replaced with the CALLERPRES() dialplan function
  and is now deprecated.
* DISA()'s fifth argument is now an options argument.  If you have previously
  used 'NOANSWER' in this argument, you'll need to convert that to the new
  option 'n'.

CDR:

* The cdr_sqlite module has been marked as deprecated in favor of
  cdr_sqlite3_custom.  It will potentially be removed from the tree
  after Asterisk 1.6 is released.

Formats:

* format_wav: The GAIN preprocessor definition and source code that used it
  is removed.  This change was made in response to user complaints of
  choppiness or the clipping of loud signal peaks.  To increasing the volume
  of voicemail messages, use the 'volgain' option in voicemail.conf

Channel Drivers:

* chan_sip.c: a small upgrade to support the "Record" button on the SNOM360,
  which sends a sip INFO message with a "Record: on" or "Record: off" 
  header. If asterisk is set up (via features.conf) to accept "One Touch Monitor"
  requests (by default, via '*1'), then the user-configured dialpad sequence
  is generated, and recording can be started and stopped via this button. The
  file names and formats are all controlled via the normal mechanisms. If the
  user has not configured the automon feature, the normal "415 Unsupported media type"
  is returned, and nothing is done.

